/*
//[%]	[\%]

May 15, 1998 RHG. Added ~model~ token.

August 8, 2000 RHG. Changed [%]p (the number of positions for Lex) to 5000.

August 10, 2000 RHG. Changed [%]e (the number of parse tree nodes) to 2000.

March 2002 Ulrich Telle Port to C++, using ~flex~ and ~bison~ instead of ~lex~ and ~yacc~.
The pattern for floating point numbers is adjusted so that numbers produced by
C/C++ programs are interpreted correctly.

January 29, 2004 RHG. Increased numbers [%]n to 2000 and [%]e to 4000.

October 14, 2004 RHG Added text and file tokens.

*/
			
%p 8000
%n 2000
%e 4000
%{
#include "SecParser.tab.hpp"
#include "NestedText.h"

#define yylval xxlval
extern int yylval;
int yywrap();

#define YY_NO_UNPUT
%}

letter         	[a-zA-Z]
digit          	[0-9]
ident          	{letter}({letter}|{digit}|_)*  
num1	       	[-+]?{digit}+\.?([eE][-+]?{digit}+)?
num2	       	[-+]?{digit}*\.{digit}+([eE][-+]?{digit}+)?
number	       	{num1}|{num2}
string         	\"[^\"]*\"   
text	  	"<text>"[^<\n]+"</text--->"
file	  	"<file>"[^<\n]+"</file--->"

%%

[ \t\n]+  	;

-?[0-9]+  	{yylval = NestedText::Atom( yytext, yyleng ); return ZZINTEGER;}
{number}	{yylval = NestedText::Atom( yytext, yyleng ); return ZZREAL;}
TRUE  		{yylval = NestedText::Atom( yytext, yyleng ); return ZZBOOLEAN;}
FALSE		{yylval = NestedText::Atom( yytext, yyleng ); return ZZBOOLEAN;}
{string} 	{yylval = NestedText::Atom( yytext, yyleng ); return ZZSTRING;}
fun		{yylval = NestedText::Atom( yytext, yyleng ); return ZZFUN;}
const		{yylval = NestedText::Atom( yytext, yyleng ); return ZZCONST;}
tuple		{yylval = NestedText::Atom( yytext, yyleng ); return ZZTUPLE;}
group		{yylval = NestedText::Atom( yytext, yyleng ); return ZZGROUP;}

type		{yylval = NestedText::Atom( yytext, yyleng ); return ZZTYPE;}
delete		{yylval = NestedText::Atom( yytext, yyleng ); return ZZDELETE;}
create		{yylval = NestedText::Atom( yytext, yyleng ); return ZZCREATE;}
update		{yylval = NestedText::Atom( yytext, yyleng ); return ZZUPDATE;}
":="		{yylval = NestedText::Atom( yytext, yyleng ); return ZZASSIGN;}
query		{yylval = NestedText::Atom( yytext, yyleng ); return ZZQUERY;}
model           {yylval = NestedText::Atom( yytext, yyleng ); return ZZMODEL;}
let		{yylval = NestedText::Atom( yytext, yyleng ); return ZZLET;}
derive		{yylval = NestedText::Atom( yytext, yyleng ); return ZZDERIVE;}
persistent	{yylval = NestedText::Atom( yytext, yyleng ); return ZZPERSISTENT;}
begin		{yylval = NestedText::Atom( yytext, yyleng ); return ZZBEGIN1;}
transaction	{yylval = NestedText::Atom( yytext, yyleng ); return ZZTRANSACTION;}
commit		{yylval = NestedText::Atom( yytext, yyleng ); return ZZCOMMIT;}
abort		{yylval = NestedText::Atom( yytext, yyleng ); return ZZABORT;}
database	{yylval = NestedText::Atom( yytext, yyleng ); return ZZDATABASE;}
open		{yylval = NestedText::Atom( yytext, yyleng ); return ZZOPEN;}
close		{yylval = NestedText::Atom( yytext, yyleng ); return ZZCLOSE;}
save		{yylval = NestedText::Atom( yytext, yyleng ); return ZZSAVE;}
to		{yylval = NestedText::Atom( yytext, yyleng ); return ZZTO;}
restore		{yylval = NestedText::Atom( yytext, yyleng ); return ZZRESTORE;}
from		{yylval = NestedText::Atom( yytext, yyleng ); return ZZFROM;}
list		{yylval = NestedText::Atom( yytext, yyleng ); return ZZLIST;}
algebras	{yylval = NestedText::Atom( yytext, yyleng ); return ZZALGEBRAS;}
algebra		{yylval = NestedText::Atom( yytext, yyleng ); return ZZALGEBRA;}
databases	{yylval = NestedText::Atom( yytext, yyleng ); return ZZDATABASES;}
constructors	{yylval = NestedText::Atom( yytext, yyleng ); return ZZCONSTRUCTORS;}
operators	{yylval = NestedText::Atom( yytext, yyleng ); return ZZOPERATORS;}
types		{yylval = NestedText::Atom( yytext, yyleng ); return ZZTYPES;}
objects		{yylval = NestedText::Atom( yytext, yyleng ); return ZZOBJECTS;}
counters	{yylval = NestedText::Atom( yytext, yyleng ); return ZZCOUNTERS;}
".."		{yylval = NestedText::Atom( yytext, yyleng ); return ZZDOUBLE;}
"="		{yylval = NestedText::Atom( yytext, yyleng ); return ZZEQ;}
value		{yylval = NestedText::Atom( yytext, yyleng ); return ZZVALUE;}
{text}		{yylval = NestedText::Atom( yytext, yyleng ); return ZZTEXT;}
{file}		{yylval = NestedText::Atom( yytext, yyleng ); return ZZFILE;}
