# a test for the BinaryFile Algebra
# run with : Runner -c MyConfig.config < binfiletest
# (Runner can be found in directory UserInterfaces)

# clean up what may be left over from e.g. a segfault
delete database binfiletest;

#setup
create database binfiletest;
open database binfiletest;
e

(create geo : binfile);
(update geo := (binfile <file>geo</file--->));

(create jni : binfile);
(update jni := (binfile <file>JNI.ini</file--->));

(create relFile :
  (rel
    (tuple
      (
        (no int)
        (file binfile)
        (name string)
      )
    )
  )
);


(update relFile :=
(
  (rel
    (tuple
      (
        (no int)
        (file binfile)
        (name string)
      )
    )
  )
  (
    (1 <file>JNI.ini</file---> "JNI2.ini")
  )
) );

#testcase binfile1
#yields (bool TRUE)
query geo saveto "geo2";

#testcase binfile2
#yields (int 1)
query relFile feed filter[.file saveto .name] count;

#teardown
close database;
delete database binfiletest;

